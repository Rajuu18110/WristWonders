<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orders - WristWonders</title>
    <link rel="stylesheet" href="./css/bootstrap.min.css">
    <link rel="stylesheet" href="./css/main.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>

<body>
    <!-- Navbar will be loaded here -->
    <nav class="navbar navbar-expand-lg sticky-top bg-body-tertiary" id="navbar"
        style="background-color: #000000 !important;">
    </nav>

    <div class="container-fluid pt-3 px-5" style="min-height: 400px;">
        <h1 class="text-center mb-4">Order History</h1>
        <div id="orderHistory">
            <!-- Order history will be displayed here -->
        </div>
    </div>

    <!-- footer -->
    <footer class="footer px-5 py-3 bg-black border-3 border-top border-primary" id="footer">
    </footer>

    <script src="./js/bootstrap.bundle.min.js"></script>
    <script src="./js/main.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const orderHistoryElement = document.getElementById('orderHistory');
            const logoutButton = document.getElementById('logoutButton');

            // Check if user is logged in
            if (localStorage.getItem('loggedIn') !== 'true') {
                alert('Please log in to view your orders.');
                window.location.href = 'login.html'; // Redirect to login page
                return;
            }

            // Load order history from localStorage
            const orderHistory = JSON.parse(localStorage.getItem('orderHistory')) || [];
            if (orderHistory.length === 0) {
                orderHistoryElement.innerHTML = '<p class="text-center">No orders found.</p>';
            } else {
                let tableHtml = `
                    <table class="table table-striped table-bordered">
                        <thead class="table-dark">
                            <tr>
                                <th>Order Number</th>
                                <th>Items Ordered</th>
                                <th>Total Amount</th>
                                <th>Order Date</th>
                            </tr>
                        </thead>
                        <tbody>
                `;
                orderHistory.forEach((order, index) => {
                        tableHtml += `
                            <tr>
                                <td>${index + 1}</td>
                                <td>${order.items.map(item => `${item.name} (x${item.quantity})`).join(', ')}</td>
                                <td class="text-end">$${order.totalAmount.toFixed(2)}</td>
                                <td>${order.date}</td>
                            </tr>
                        `;
                    });
                tableHtml += `
                        </tbody>
                    </table>
                `;
                orderHistoryElement.innerHTML = tableHtml;
            }
        });
    </script>
</body>

</html>
